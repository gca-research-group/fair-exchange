type: collection.insomnia.rest/5.0
name: Fair Exchange
meta:
  id: wrk_bd368529e37b429099a78f12d1174f93
  created: 1743343450804
  modified: 1744051379155
collection:
  - name: Bob
    meta:
      id: fld_aa86dcb61818418c8583a0bd8c2afb5f
      created: 1743343485505
      modified: 1744117797024
      sortKey: -1743343485505
    children:
      - url: "{{ _.baseUrl }}{{ _.uri }}"
        name: 01 - Create
        meta:
          id: req_14c2948b71cc43b882c7a5b7d043af40
          created: 1743343512283
          modified: 1744114746828
          isPrivate: false
          sortKey: -1743343512284
        method: POST
        headers:
          - name: User-Agent
            value: insomnia/11.0.0
        settings:
          renderRequestBody: true
          encodeUrl: true
          followRedirects: global
          cookies:
            send: true
            store: true
          rebuildPath: true
      - url: "{{ _.baseUrl }}/api/healthcheck"
        name: 00 - Healthcheck
        meta:
          id: req_8c0b785a759044908bd66432a319d5c7
          created: 1743346457673
          modified: 1744142855446
          isPrivate: false
          sortKey: -1743343512384
        method: GET
        headers:
          - name: User-Agent
            value: insomnia/11.0.0
        settings:
          renderRequestBody: true
          encodeUrl: true
          followRedirects: global
          cookies:
            send: true
            store: true
          rebuildPath: true
      - url: http://localhost:5002/{{ _.uri }}{{ _.exchangeToken }}/handshake/
        name: 02 - Handshake
        meta:
          id: req_b29bc0295ea94b13bdd08ccf46226fb6
          created: 1744053049714
          modified: 1744142941205
          isPrivate: false
          sortKey: -1742797831742
        method: POST
        headers:
          - name: User-Agent
            value: insomnia/11.0.0
        settings:
          renderRequestBody: true
          encodeUrl: true
          followRedirects: global
          cookies:
            send: true
            store: true
          rebuildPath: true
      - url: "{{ _.baseUrl }}{{ _.uri }}{{ _.exchangeToken }}/send/"
        name: 03 - Send the item to Alice
        meta:
          id: req_5a55403ffca74cb39e86d0c0265ea526
          created: 1744054460665
          modified: 1744115011955
          isPrivate: false
          sortKey: -1742524991471
        method: POST
        headers:
          - name: User-Agent
            value: insomnia/11.0.0
        settings:
          renderRequestBody: true
          encodeUrl: true
          followRedirects: global
          cookies:
            send: true
            store: true
          rebuildPath: true
      - url: "{{ _.pbbUrl }}/api/exchange/"
        name: 05 - Register on pbb
        meta:
          id: req_bc3f4821355049bdb3bf5014d707bae5
          created: 1744114068506
          modified: 1744117834636
          isPrivate: false
          sortKey: -1742388571335.5
        method: POST
        body:
          mimeType: application/json
          text: |-
            {
            	"exchange_token": "{{ _.exchangeToken }}",
            	"user_token": "{{ _.userToken }}"
            }
        headers:
          - name: Content-Type
            value: application/json
          - name: User-Agent
            value: insomnia/11.0.0
        settings:
          renderRequestBody: true
          encodeUrl: true
          followRedirects: global
          cookies:
            send: true
            store: true
          rebuildPath: true
      - url: "{{ _.baseUrl }}{{ _.uri }}{{ _.exchangeToken }}"
        name: 00 - Query the exchange
        meta:
          id: req_b25474d001884fec9f3789ef7ab7baa1
          created: 1744116765820
          modified: 1744117934853
          isPrivate: false
          sortKey: -1743343512334
        method: GET
        headers:
          - name: User-Agent
            value: insomnia/11.0.0
        settings:
          renderRequestBody: true
          encodeUrl: true
          followRedirects: global
          cookies:
            send: true
            store: true
          rebuildPath: true
      - url: "{{ _.pbbUrl }}/api/exchange/{{ _.exchangeToken }}/{{ _.userToken
          }}/private-key"
        name: 07 - Send the private key
        meta:
          id: req_178334745c944d51b55aec1688154113
          created: 1744117440938
          modified: 1744122121682
          isPrivate: false
          sortKey: -1742320361267.75
        method: POST
        body:
          mimeType: application/octet-stream
          fileName: C:\Users\teles\Documents\fair-exchange-v2\attestables\bob\project\attestable\13f3cb26-e3a7-413e-a500-fccc7e8cd14e\private_key.pem
        headers:
          - name: Content-Type
            value: application/x-x509-ca-cert
          - name: User-Agent
            value: insomnia/11.0.0
        settings:
          renderRequestBody: true
          encodeUrl: true
          followRedirects: global
          cookies:
            send: true
            store: true
          rebuildPath: true
      - url: "{{ _.pbbUrl }}/api/exchange/{{ _.exchangeToken }}/verify-private-key"
        name: 08 - Verify Alice's private key
        meta:
          id: req_a548d1f537164ed7992eb44c11a1bdb1
          created: 1744122151922
          modified: 1744122908395
          isPrivate: false
          sortKey: -1742286256233.875
        method: POST
        body:
          mimeType: application/octet-stream
          fileName: C:\Users\teles\Documents\fair-exchange-v2\attestables\bob\project\attestable\13f3cb26-e3a7-413e-a500-fccc7e8cd14e\alice\public_key.pem
        headers:
          - name: Content-Type
            value: application/x-x509-ca-cert
          - name: User-Agent
            value: insomnia/11.0.0
        settings:
          renderRequestBody: true
          encodeUrl: true
          followRedirects: global
          cookies:
            send: true
            store: true
          rebuildPath: true
      - url: "{{ _.pbbUrl }}/api/exchange/{{ _.exchangeToken }}/{{ _.userToken
          }}/accept"
        name: 10 - Accept the exchange
        meta:
          id: req_c2cd2b3314c140caaece9faf489c1157
          created: 1744123787281
          modified: 1744123859449
          isPrivate: false
          sortKey: -1742286256133.875
        method: PUT
        body:
          mimeType: application/octet-stream
          fileName: C:\Users\teles\Documents\fair-exchange-v2\attestables\bob\project\attestable\13f3cb26-e3a7-413e-a500-fccc7e8cd14e\private_key.pem
        headers:
          - name: Content-Type
            value: application/x-x509-ca-cert
          - name: User-Agent
            value: insomnia/11.0.0
        settings:
          renderRequestBody: true
          encodeUrl: true
          followRedirects: global
          cookies:
            send: true
            store: true
          rebuildPath: true
      - url: "{{ _.pbbUrl }}/api/exchange/{{ _.exchangeToken }}/{{ _.userToken
          }}/reject"
        name: 10 - Reject the exchange
        meta:
          id: req_4c0214487be946d29e3adf3a8c6b71d9
          created: 1744123912878
          modified: 1744123918802
          isPrivate: false
          sortKey: -1742269203666.9375
        method: PUT
        body:
          mimeType: application/octet-stream
          fileName: C:\Users\teles\Documents\fair-exchange-v2\attestables\bob\project\attestable\13f3cb26-e3a7-413e-a500-fccc7e8cd14e\private_key.pem
        headers:
          - name: Content-Type
            value: application/x-x509-ca-cert
          - name: User-Agent
            value: insomnia/11.0.0
        settings:
          renderRequestBody: true
          encodeUrl: true
          followRedirects: global
          cookies:
            send: true
            store: true
          rebuildPath: true
      - url: "{{ _.pbbUrl }}/api/exchange/{{ _.exchangeToken }}/private-keys"
        name: 12 - Get the private keys
        meta:
          id: req_7ffc35f115354db4bab7ece9c877640b
          created: 1744123972761
          modified: 1744124139022
          isPrivate: false
          sortKey: -1742269203566.9375
        method: GET
        headers:
          - name: User-Agent
            value: insomnia/11.0.0
        settings:
          renderRequestBody: true
          encodeUrl: true
          followRedirects: global
          cookies:
            send: true
            store: true
          rebuildPath: true
    environment:
      baseUrl: http://localhost:5001
      pbbUrl: http://localhost:5000
      uri: /api/exchange/
      exchangeToken: "{% response 'body', 'req_14c2948b71cc43b882c7a5b7d043af40',
        'b64::JC5leGNoYW5nZV90b2tlbg==::46b', 'never', 60 %}"
      userToken: "{% response 'body', 'req_14c2948b71cc43b882c7a5b7d043af40',
        'b64::JC51c2VyX3Rva2Vu::46b', 'never', 60 %}"
  - name: Alice
    meta:
      id: fld_5ccfbf8359c74eefb77500279f5a783c
      created: 1744056120635
      modified: 1744117896432
      sortKey: -1742019309613.5
    children:
      - url: "{{ _.baseUrl }}/healthcheck"
        name: 00 - Healthcheck
        meta:
          id: req_3d9c320b61a44d0dbfd56520d4a48563
          created: 1744056120638
          modified: 1744115020776
          isPrivate: false
          sortKey: -1743343512384
        method: GET
        headers:
          - name: User-Agent
            value: insomnia/11.0.0
        settings:
          renderRequestBody: true
          encodeUrl: true
          followRedirects: global
          cookies:
            send: true
            store: true
          rebuildPath: true
      - url: "{{ _.baseUrl }}{{ _.uri }}{{ _.exchangeToken }}/send/"
        name: 04 - Send the item to Bob
        meta:
          id: req_0bde352f181e49b1903eb9c4d62dd2cd
          created: 1744056120640
          modified: 1744115035182
          isPrivate: false
          sortKey: -1742524991471
        method: POST
        headers:
          - name: User-Agent
            value: insomnia/11.0.0
        settings:
          renderRequestBody: true
          encodeUrl: true
          followRedirects: global
          cookies:
            send: true
            store: true
          rebuildPath: true
      - url: "{{ _.pbbUrl }}/api/exchange/{{ _.exchangeToken }}/user/{{ _.userToken }}"
        name: 06 - Register on pbb
        meta:
          id: req_3b749958218e4cc59c41acc095b13724
          created: 1744114636216
          modified: 1744117924826
          isPrivate: false
          sortKey: -1742524991371
        method: POST
        body:
          mimeType: application/json
          text: |-
            {
            	"exchange_token": "{{ _.exchangeToken }}",
            	"user_token": "{{ _.userToken }}"
            }
        headers:
          - name: Content-Type
            value: application/json
          - name: User-Agent
            value: insomnia/11.0.0
        settings:
          renderRequestBody: true
          encodeUrl: true
          followRedirects: global
          cookies:
            send: true
            store: true
          rebuildPath: true
      - url: "{{ _.pbbUrl }}/api/exchange/{{ _.exchangeToken }}/{{ _.userToken
          }}/private-key"
        name: 08 - Send the private key
        meta:
          id: req_30ee28799825493283225e9b16bf3961
          created: 1744117844851
          modified: 1744122104500
          isPrivate: false
          sortKey: -1742524991271
        method: POST
        body:
          mimeType: application/octet-stream
          fileName: C:\Users\teles\Documents\fair-exchange-v2\attestables\alice\project\attestable\13f3cb26-e3a7-413e-a500-fccc7e8cd14e\private_key.pem
        headers:
          - name: Content-Type
            value: application/x-x509-ca-cert
          - name: User-Agent
            value: insomnia/11.0.0
        settings:
          renderRequestBody: true
          encodeUrl: true
          followRedirects: global
          cookies:
            send: true
            store: true
          rebuildPath: true
      - url: "{{ _.baseUrl }}{{ _.uri }}{{ _.exchangeToken }}"
        name: 00 - Query the exchange
        meta:
          id: req_f9b6f7360ee04cff80835801f0dcbc1f
          created: 1744117932692
          modified: 1744117932692
          isPrivate: false
          sortKey: -1742866041834.75
        method: GET
        headers:
          - name: User-Agent
            value: insomnia/11.0.0
        settings:
          renderRequestBody: true
          encodeUrl: true
          followRedirects: global
          cookies:
            send: true
            store: true
          rebuildPath: true
      - url: "{{ _.pbbUrl }}/api/exchange/{{ _.exchangeToken }}/verify-private-key"
        name: 09 - Verify Bob's private key
        meta:
          id: req_32d1855635cd466aaec9218c9de2a1ab
          created: 1744122171284
          modified: 1744123760079
          isPrivate: false
          sortKey: -1742524991171
        method: POST
        body:
          mimeType: application/octet-stream
          fileName: C:\Users\teles\Documents\fair-exchange-v2\attestables\alice\project\attestable\13f3cb26-e3a7-413e-a500-fccc7e8cd14e\bob\public_key.pem
        headers:
          - name: Content-Type
            value: application/x-x509-ca-cert
          - name: User-Agent
            value: insomnia/11.0.0
        settings:
          renderRequestBody: true
          encodeUrl: true
          followRedirects: global
          cookies:
            send: true
            store: true
          rebuildPath: true
      - url: "{{ _.pbbUrl }}/api/exchange/{{ _.exchangeToken }}/{{ _.userToken
          }}/accept"
        name: 11 - Accept the exchange
        meta:
          id: req_3f5a4ee758fd4e9895814a928729e78b
          created: 1744123876790
          modified: 1744123887688
          isPrivate: false
          sortKey: -1742524991071
        method: PUT
        body:
          mimeType: application/octet-stream
          fileName: C:\Users\teles\Documents\fair-exchange-v2\attestables\bob\project\attestable\13f3cb26-e3a7-413e-a500-fccc7e8cd14e\private_key.pem
        headers:
          - name: Content-Type
            value: application/x-x509-ca-cert
          - name: User-Agent
            value: insomnia/11.0.0
        settings:
          renderRequestBody: true
          encodeUrl: true
          followRedirects: global
          cookies:
            send: true
            store: true
          rebuildPath: true
      - url: "{{ _.pbbUrl }}/api/exchange/{{ _.exchangeToken }}/{{ _.userToken
          }}/reject"
        name: 11 - Reject the exchange
        meta:
          id: req_c6315542c7094776899c457ed7505992
          created: 1744123931538
          modified: 1744123942350
          isPrivate: false
          sortKey: -1742524990971
        method: PUT
        body:
          mimeType: application/octet-stream
          fileName: C:\Users\teles\Documents\fair-exchange-v2\attestables\bob\project\attestable\13f3cb26-e3a7-413e-a500-fccc7e8cd14e\private_key.pem
        headers:
          - name: Content-Type
            value: application/x-x509-ca-cert
          - name: User-Agent
            value: insomnia/11.0.0
        settings:
          renderRequestBody: true
          encodeUrl: true
          followRedirects: global
          cookies:
            send: true
            store: true
          rebuildPath: true
      - url: "{{ _.pbbUrl }}/api/exchange/{{ _.exchangeToken }}/private-keys"
        name: 13 - Get the private keys
        meta:
          id: req_92bcc61da0ac4104afe3f39ed546a3a5
          created: 1744124007468
          modified: 1744124153247
          isPrivate: false
          sortKey: -1742524990871
        method: GET
        headers:
          - name: User-Agent
            value: insomnia/11.0.0
        settings:
          renderRequestBody: true
          encodeUrl: true
          followRedirects: global
          cookies:
            send: true
            store: true
          rebuildPath: true
    environment:
      baseUrl: http://localhost:5002
      pbbUrl: http://localhost:5000
      uri: /api/exchange/
      exchangeToken: "{% response 'body', 'req_14c2948b71cc43b882c7a5b7d043af40',
        'b64::JC5leGNoYW5nZV90b2tlbg==::46b', 'never', 60 %}"
      userToken: "{% response 'body', 'req_b25474d001884fec9f3789ef7ab7baa1',
        'b64::JC51c2VyX3Rva2Vu::46b', 'never', 60 %}"
cookieJar:
  name: Default Jar
  meta:
    id: jar_2d13a27f3b4dba9e8caf4fb8ad5705edd8bb2039
    created: 1743343450811
    modified: 1743343450811
environments:
  name: Base Environment
  meta:
    id: env_2d13a27f3b4dba9e8caf4fb8ad5705edd8bb2039
    created: 1743343450808
    modified: 1744053819724
    isPrivate: false
  data:
    baseUrl: http://localhost:5000/api
